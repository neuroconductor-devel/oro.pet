<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Calculating SUVs for PET Using QIBA Pseudocode — activityConcentration • oro.pet</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Calculating SUVs for PET Using QIBA Pseudocode — activityConcentration"><meta property="og:description" content="The standard uptake value (SUV) is calculated based on an 18F-FDG-PET
acquistion using ancillary information contained in the DICOM data."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">oro.pet</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculating SUVs for PET Using QIBA Pseudocode</h1>

    <div class="hidden name"><code>qiba.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The standard uptake value (SUV) is calculated based on an 18F-FDG-PET
acquistion using ancillary information contained in the DICOM data.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">activityConcentration</span><span class="op">(</span><span class="va">pixelData</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'array'</span></span>
<span><span class="fu">activityConcentration</span><span class="op">(</span></span>
<span>  <span class="va">pixelData</span>,</span>
<span>  CSV <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seriesNumber <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"qiba"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">.activityConcentration</span><span class="op">(</span></span>
<span>  <span class="va">pixelData</span>,</span>
<span>  CSV <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seriesNumber <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"qiba"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">standardUptakeValue</span><span class="op">(</span><span class="va">pixelData</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'array'</span></span>
<span><span class="fu">standardUptakeValue</span><span class="op">(</span></span>
<span>  <span class="va">pixelData</span>,</span>
<span>  mask <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  CSV <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seriesNumber <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"qiba"</span>, <span class="st">"user"</span><span class="op">)</span>,</span>
<span>  prior <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  decayedDose <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">.standardUptakeValue</span><span class="op">(</span></span>
<span>  <span class="va">pixelData</span>,</span>
<span>  mask <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  CSV <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seriesNumber <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"qiba"</span>, <span class="st">"user"</span><span class="op">)</span>,</span>
<span>  prior <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  decayedDose <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-pixeldata">pixelData<a class="anchor" aria-label="anchor" href="#arg-pixeldata"></a></dt>
<dd><p>is a multidimensional array of signal intensities of class
<code>nifti</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional arguments</p></dd>


<dt id="arg-csv">CSV<a class="anchor" aria-label="anchor" href="#arg-csv"></a></dt>
<dd><p>is a <code>data.frame</code> that is the output from <code>dicomTable</code>
and contains all necessary DICOM header fields.</p></dd>


<dt id="arg-seriesnumber">seriesNumber<a class="anchor" aria-label="anchor" href="#arg-seriesnumber"></a></dt>
<dd><p>is the SeriesNumber that corresponds to the PET
acquisition.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>takes on two possible values (<code>qiba</code> and <code>user</code>),
where QIBA pseudocode is used to calculate the SUVs or user-defined
parameters are used.</p></dd>


<dt id="arg-mask">mask<a class="anchor" aria-label="anchor" href="#arg-mask"></a></dt>
<dd><p>is a multidimensional array of logical values (only used when
<code>method = "user"</code>).</p></dd>


<dt id="arg-prior">prior<a class="anchor" aria-label="anchor" href="#arg-prior"></a></dt>
<dd><p>is a list of DICOM header field names that are necessary for
the SUV calculation under <code>method = "user"</code> or may be used to replace
values from the DICOM header information when <code>method = "qiba"</code>.</p></dd>


<dt id="arg-decayeddose">decayedDose<a class="anchor" aria-label="anchor" href="#arg-decayeddose"></a></dt>
<dd><p>is the amount of the RadionuclideTotalDose after being
corrected for residual dose in the syringe.  This value is NOT usually
corrected in the DICOM data.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A list containing the following items</p><ul><li><p>SUVbwis a
multidimensional array, the same dimension as <code>pixelData</code>, that
contains the standard uptake values.</p></li>
<li><p>hdris a list of DICOM header
fields used in the SUV calculation.</p></li>
<li><p>decayTimeis the decay time
calculated from the DICOM header information.</p></li>
<li><p>decayedDoseis the
RadionuclideTotalDose, if taken from the DICOM header information, or the
user-specified value.</p></li>
<li><p>SUVbwScaleFactoris
\(\mbox{PatientsWeight}\cdot1000/\mbox{decayedDose}\).</p></li>
</ul></div>
    <div id="note">
    <h2>Note</h2>
    <p>Note, for GE scanners it is common for the RescaleSlope DICOM field to vary
on a slice-by-slice basis.  This is taken into account if a GE scanner is
detected from the Modality DICOM field.  However, the InstanceNumber is used
to reorder the slices so they match the incoming NIfTI file of PixelData.
If this is not correct it may be necessary to manually re-order the
RescaleSlope field in the CSV data frame so that the activity concentration
is calculated correctly.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p><a href="https://qibawiki.rsna.org/index.php?title=Standardized_Uptake_Value_(SUV)" class="external-link">https://qibawiki.rsna.org/index.php?title=Standardized_Uptake_Value_(SUV)</a></p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/pkg/oro.dicom/man/dicomTable.html" class="external-link">dicomTable</a></code>, <code><a href="https://rdrr.io/pkg/oro.nifti/man/nifti.html" class="external-link">nifti</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Brandon Whitcher <a href="mailto:bwhitcher@gmail.com">bwhitcher@gmail.com</a></p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Brandon Whitcher.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

